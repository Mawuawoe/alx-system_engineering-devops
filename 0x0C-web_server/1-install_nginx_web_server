#!/usr/bin/env bash

# Update package list
sudo apt-get update

# Install nginx
sudo apt-get install -y nginx

# Ensure Nginx is running and set to listen on port 80
sudo service nginx start

# Create a custom HTML page
echo 'Hello World!' | sudo tee /var/www/html/index.html

# Reload Nginx to apply the new HTML page
sudo nginx -s reload

# Verify the setup
response=$(curl -s -o /dev/null -w "%{http_code}" localhost)
echo "HTTP response code: $response"

# Ensure that the response contains "Hello World!"
content=$(curl -s localhost)
if [[ "$content" == *"Hello World!"* ]]; then
  echo "Content check passed: 'Hello World!' is present"
else
  echo "Content check failed: 'Hello World!' is not present"
fi
